<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Change Username</title>
    <link rel="stylesheet" href="globals.css" />
    <link rel="stylesheet" href="changeusername.css" />
    <link rel="stylesheet" href="menu.css" />
    <script src="menu.js" defer></script>
  </head>
  <body>
    <div class="change-username">
      <div class="div">
        <!-- Save Button -->
        <div class="overlap">
          <a href="home.html">
            <div class="rectangle"></div>
            <button type="submit" class="save-username-button">
              Save New Username
            </button>
          </a>
        </div>

        <!-- Header, Logo, Menu -->
        <div class="overlap-group">
          <div class="group">
            <div class="overlap-group-2">
              <div class="frame"></div>
              <a href="home.html">
                <img
                  class="image"
                  src="Images/draftdecklogo2.png"
                  alt="Go to Home"
                />
              </a>
            </div>
          </div>

          <!-- Reusable Menu Placeholder -->
<div id="menu-placeholder"></div>

        <!-- Username Input -->
        <label for="new-username" class="text-wrapper-3">New Username</label>
        <input
          type="text"
          id="new-username"
          name="new-username"
          class="username-input"
          placeholder="Enter new username"
          aria-required="true"
        />
      </div>
    </div>
    <!-- Load and activate the reusable menu -->
<script>
  fetch("menu.html")
    .then((res) => res.text())
    .then((data) => {
      document.getElementById("menu-placeholder").innerHTML = data;

      // Reattach menu functionality after it's loaded
      const menuIcon = document.getElementById("menu-icon");
      const menu = document.getElementById("menu");

      menuIcon.addEventListener("click", function (event) {
        event.stopPropagation();
        menu.style.display = menu.style.display === "block" ? "none" : "block";
      });

      document.addEventListener("click", function (event) {
        if (!menu.contains(event.target) && event.target !== menuIcon) {
          menu.style.display = "none";
        }
      });

      document.querySelectorAll("#menu a").forEach((link) => {
        link.addEventListener("click", function () {
          menu.style.display = "none";
        });
      });
    });
</script>
  </body>
</html>
