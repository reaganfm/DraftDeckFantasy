<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password</title>
    <link rel="stylesheet" href="forgotpassword.css">
</head>

<body>
    <div class="forgot-password">
        <div class="div">
            <img class="logo" src="Images/draftdecklogo2.png" alt="DraftDeck Logo" />
            <div class="text-wrapper">Forgot Password</div>
            <div class="text-wrapper-2">We will send you a reset password link to your email.</div>
            <div class="email-field">
                <label for="email" class="label">Your Email</label>
                <input type="email" id="email" class="input-field" />
                <div id="emailError" class="error-message"></div>
            </div>
            <button id="send-btn" class="rectangle">Send</button>
            <div id="success-container" class="success-container hidden">
                <div class="success-message">A password reset link has been sent. Please check your inbox.</div>
                <button id="retry-btn" class="rectangle">Didn't receive the email? Try again</button>
            </div>
            <div class="login-link">
              <a href="login.html">Back to Login</a>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const emailInput = document.getElementById('email');
            const sendButton = document.getElementById('send-btn');
            const successContainer = document.getElementById('success-container');
            const retryButton = document.getElementById('retry-btn');
            const emailError = document.getElementById('emailError');

            function isValidEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }

            function showSuccessState() {
                sendButton.style.display = 'none';
                successContainer.style.display = 'flex';
                successContainer.classList.remove('hidden');
            }

            function resetState() {
                sendButton.style.display = 'block';
                successContainer.style.display = 'none';
                successContainer.classList.add('hidden');
                emailInput.value = '';
                emailError.textContent = '';
                emailInput.classList.remove('input-error');
            }

            sendButton.addEventListener('click', () => {
                const email = emailInput.value.trim();

                if (!isValidEmail(email)) {
                    emailError.textContent = "Please enter a valid email address.";
                    emailInput.classList.add('input-error');
                    return;
                }

                console.log('Simulating sending reset email to:', email);
                emailError.textContent = "";
                emailInput.classList.remove('input-error');
                showSuccessState();
            });

            retryButton.addEventListener('click', () => {
                resetState();
            });
        });
    </script>
</body>

</html>